## Summary:  
Software: wildfly  
## Fix:  
Commit: https://github.com/ehsavoie/generic-jms-ra/commit/e431eecc0b91731e5702a46aa889c2242c72b9a6  
Author: Emmanuel Hugonnet  
Fix Time (of the Last Commit): 2020-09-17  
Fix Pattern: Sanitization -> Redaction -> Introduction  
  
  
Fixing-commits Count: 3  
Total Change Size: +67 -29  
  
========  
子项目PR: https://github.com/jms-ra/generic-jms-ra/pull/37  
Commit: https://github.com/ehsavoie/generic-jms-ra/commit/457e4ca07216c303ae7096e083871934d300ae91  
Change Size: +63 -25  
Time: 2020-09-25  
Commit: https://github.com/ehsavoie/generic-jms-ra/commit/e431eecc0b91731e5702a46aa889c2242c72b9a6  
Change Size: +3 -3  
Time: 2020-09-17  
  
主项目PR: https://github.com/wildfly/wildfly/pull/13610  
Commit: https://github.com/ehsavoie/wildfly/commit/0e1a83e45553e4e57dbff11261feb11c12ebd63e  
Change Size: +1 -1  
Time: 2020-09-30  
## Sample logs: Yes  
```  
14:24:51,513 WARN  [org.jboss.resource.adapter.jms.JmsManagedConnection] (QpidJMS Connection Executor: ID:a340d7e7-a228-4730-b8ab-3bc7a1f66b41:1) Handling jms exception failure: JmsManagedConnection{mcf=org.jboss.resource.adapter.jms.JmsManagedConnectionFactory@1f572370, info=JmsConnectionRequestInfo{userName=example, password=example, clientID=null, transacted=false, acknowledgeMode=1, type=3}, user=example, pwd=example, isSetUp=true, isDestroyed=false, lock=org.jboss.resource.adapter.jms.ReentrantLock@317e1235[Unlocked], con=org.jboss.resource.adapter.jms.JmsConnectionSession@4b199ffd, session=class org.apache.qpid.jms.JmsSession@1532118793, xaSession=null, xaResource=null, xaTransacted=false, context=org.apache.qpid.jms.JmsContext@3fb9fa6a, xaContext=null}: org.apache.qpid.jms.exceptions.JmsConnectionFailedException: The JMS connection has failed: Transport connection remotely closed.  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.provider.exceptions.ProviderFailedException.toJMSException(ProviderFailedException.java:35)  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.provider.exceptions.ProviderFailedException.toJMSException(ProviderFailedException.java:21)  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.exceptions.JmsExceptionSupport.create(JmsExceptionSupport.java:80)  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.exceptions.JmsExceptionSupport.create(JmsExceptionSupport.java:112)  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.JmsConnection.onAsyncException(JmsConnection.java:1546)  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.JmsConnection.onProviderException(JmsConnection.java:1530)  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.JmsConnection.onConnectionFailure(JmsConnection.java:1374)  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.provider.amqp.AmqpProvider.fireProviderException(AmqpProvider.java:1150)  
        at deployment.resource-adapter.rar//org.apache.qpid.jms.provider.amqp.AmqpProvider.lambda$onTransportClosed$18(AmqpProvider.java:914)  
        at deployment.resource-adapter.rar//io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)  
        at deployment.resource-adapter.rar//io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)  
        at deployment.resource-adapter.rar//io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)  
        at deployment.resource-adapter.rar//io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)  
        at deployment.resource-adapter.rar//io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)  
        at java.base/java.lang.Thread.run(Thread.java:834)  
Caused by: org.apache.qpid.jms.provider.exceptions.ProviderFailedException: Transport connection remotely closed.  
        ... 7 more  
```  
## Logging statements:  
### Source labels:  
Type of Sensitive Information:authentication data -> JMS password  
### Sink labels:  
#### Sink 1:  
Logging call Function:  Third-party Libaries（JBoss Logging）  
Sensitiveness-Identifiable Source:  Same Modules & Cross Files（https://github.com/jms-ra/generic-jms-ra/blob/ece9e15843136023c26d3d0bd32b13826f237990/generic-jms-ra-jar/src/main/java/org/jboss/resource/adapter/jms/JmsManagedConnection.java#L1014） -> Variable Names（pwd）|String Literals（pwd，finally outputed to logs）  
Programming Language:Java  
```Java  
// https://github.com/jms-ra/generic-jms-ra/blob/ece9e15843136023c26d3d0bd32b13826f237990/generic-jms-ra-jar/src/main/java/org/jboss/resource/adapter/jms/JmsManagedConnection.java#L551-L576  
  
    public void onException(JMSException exception) {  
        if (isDestroyed) {  
            if (log.isTraceEnabled()) {  
                log.trace("Ignoring error on already destroyed connection " + this, exception);  
            }  
            return;  
        }  
  
        log.warn("Handling jms exception failure: " + this, exception); // HERE IS THE SINK 1  
  
        // We need to unlock() before sending the connection error to the  
        // event listeners. Otherwise the lock won't be in sync once  
        // cleanup() is called  
        if (lock.isLocked() && Thread.currentThread().equals(lock.getOwner())) {  
            unlock();  
        }  
  
        try {  
            con.setExceptionListener(null);  
        } catch (JMSException e) {  
            log.debug("Unable to unset exception listener", e);  
        }  
  
        ConnectionEvent event = new ConnectionEvent(this, ConnectionEvent.CONNECTION_ERROR_OCCURRED, exception);  
        sendEvent(event);  
    }  
  
```  
