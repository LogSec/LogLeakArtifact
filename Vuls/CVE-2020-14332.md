## Summary:  
Software: ansible  
## Fix:  
Commit: https://github.com/ansible/ansible/pull/71033/commits/c6da98b61948c41a7c171d0ba5cad1d001c3ba0b  
Author: Sloane Hertel  
Fix Time (of the Last Commit): 2020-08-01  
Fix Pattern: Sanitization -> Redaction -> Enhancement  
  
  
  
Fixing-commits Count: 2  
Total Change Size: +98 -2  
  

========  
PR: https://github.com/ansible/ansible/pull/71033  
  
Commit: https://github.com/ansible/ansible/pull/71033/commits/c6da98b61948c41a7c171d0ba5cad1d001c3ba0b  
Commit: https://github.com/ansible/ansible/pull/71033/commits/95d0f15c5a764e800ec2f72b5fd87c05b27d927c  
## Sample logs: Yes  
```  
[fedora-23:callback_copy_18232 (master %)]$ ANSIBLE_CONFIG=ansible.cfg ansible-playbook -v test.yml   
Using ansible.cfg as config file  
 [WARNING]: provided hosts list is empty, only localhost is available  
  
  
PLAY [test ansible callback for the copy module] *******************************  
  
TASK [copy initial] ************************************************************  
ok: [localhost] => {"changed": false, "checksum": "dc724af18fbdd4e59189f5fe768a5f8311527050", "dest": "/tmp/test", "gid": 1000, "group": "adrian", "mode": "0664", "owner": "adrian", "path": "/tmp/test", "secontext": "unconfined_u:object_r:user_tmp_t:s0", "size": 7, "state": "file", "uid": 1000}  
{'_host': localhost,  
 '_result': {'_ansible_no_log': False,  
             '_ansible_parsed': True,  
             u'changed': False,  
             'checksum': u'dc724af18fbdd4e59189f5fe768a5f8311527050',  
             'dest': u'/tmp/test',  
             u'diff': {u'after': {u'path': u'/tmp/test'},  
                       u'before': {u'path': u'/tmp/test'}},  
             u'gid': 1000,  
             u'group': u'adrian',  
             'invocation': {u'module_args': {u'backup': None,  
                                             u'content': u'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER',  
                                             u'delimiter': None,  
                                             u'dest': u'/tmp/test',  
                                             u'diff_peek': None,  
                                             u'directory_mode': None,  
                                             u'follow': False,  
                                             u'force': False,  
                                             u'group': None,  
                                             u'mode': None,  
                                             u'original_basename': u'tmp0Dlhas',  
                                             u'owner': None,  
                                             u'path': u'/tmp/test',  
                                             u'recurse': False,  
                                             u'regexp': None,  
                                             u'remote_src': None,  
                                             u'selevel': None,  
                                             u'serole': None,  
                                             u'setype': None,  
                                             u'seuser': None,  
                                             u'src': u'tmp0Dlhas',  
                                             u'state': None,  
                                             u'unsafe_writes': None,  
                                             u'validate': None}},  
             u'mode': u'0664',  
             u'owner': u'adrian',  
             u'path': u'/tmp/test',  
             u'secontext': u'unconfined_u:object_r:user_tmp_t:s0',  
             u'size': 7,  
             u'state': u'file',  
             u'uid': 1000},  
 '_task': TASK: copy initial}  
result=<ansible.executor.task_result.TaskResult object at 0x7fc7719e1a90>  
result._result[invocation]={u'module_args': {u'directory_mode': None, u'force': False, u'remote_src': None, u'path': u'/tmp/test', u'owner': None, u'follow': False, u'group': None, u'unsafe_writes': None, u'state': None, u'content': u'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', u'serole': None, u'diff_peek': None, u'setype': None, u'dest': u'/tmp/test', u'selevel': None, u'original_basename': u'tmp0Dlhas', u'regexp': None, u'validate': None, u'src': u'tmp0Dlhas', u'seuser': None, u'recurse': False, u'delimiter': None, u'mode': None, u'backup': None}}  
'module_name'  
Unable to print: 'module_name'  
 [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin (</home/adrian/src/ansible-bug-repro/callback_copy_18232/callback_plugins/custom.CallbackModule object at 0x7fc773fa0a90>): 'module_name'  
  
  
TASK [copy with force (module default)] ****************************************  
ok: [localhost] => {"changed": false, "checksum": "dc724af18fbdd4e59189f5fe768a5f8311527050", "dest": "/tmp/test", "gid": 1000, "group": "adrian", "mode": "0664", "owner": "adrian", "path": "/tmp/test", "secontext": "unconfined_u:object_r:user_tmp_t:s0", "size": 7, "state": "file", "uid": 1000}  
{'_host': localhost,  
 '_result': {'_ansible_no_log': False,  
             '_ansible_parsed': True,  
             u'changed': False,  
             'checksum': u'dc724af18fbdd4e59189f5fe768a5f8311527050',  
             'dest': u'/tmp/test',  
             u'diff': {u'after': {u'path': u'/tmp/test'},  
                       u'before': {u'path': u'/tmp/test'}},  
             u'gid': 1000,  
             u'group': u'adrian',  
             'invocation': {u'module_args': {u'backup': None,  
                                             u'content': u'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER',  
                                             u'delimiter': None,  
                                             u'dest': u'/tmp/test',  
                                             u'diff_peek': None,  
                                             u'directory_mode': None,  
                                             u'follow': False,  
                                             u'force': False,  
                                             u'group': None,  
                                             u'mode': None,  
                                             u'original_basename': u'tmp3bu_lf',  
                                             u'owner': None,  
                                             u'path': u'/tmp/test',  
                                             u'recurse': False,  
                                             u'regexp': None,  
                                             u'remote_src': None,  
                                             u'selevel': None,  
                                             u'serole': None,  
                                             u'setype': None,  
                                             u'seuser': None,  
                                             u'src': u'tmp3bu_lf',  
                                             u'state': None,  
                                             u'unsafe_writes': None,  
                                             u'validate': None}},  
             u'mode': u'0664',  
             u'owner': u'adrian',  
             u'path': u'/tmp/test',  
             u'secontext': u'unconfined_u:object_r:user_tmp_t:s0',  
             u'size': 7,  
             u'state': u'file',  
             u'uid': 1000},  
 '_task': TASK: copy with force (module default)}  
result=<ansible.executor.task_result.TaskResult object at 0x7fc77300d510>  
result._result[invocation]={u'module_args': {u'directory_mode': None, u'force': False, u'remote_src': None, u'path': u'/tmp/test', u'owner': None, u'follow': False, u'group': None, u'unsafe_writes': None, u'state': None, u'content': u'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', u'serole': None, u'diff_peek': None, u'setype': None, u'dest': u'/tmp/test', u'selevel': None, u'original_basename': u'tmp3bu_lf', u'regexp': None, u'validate': None, u'src': u'tmp3bu_lf', u'seuser': None, u'recurse': False, u'delimiter': None, u'mode': None, u'backup': None}}  
'module_name'  
Unable to print: 'module_name'  
  
TASK [copy without force] ******************************************************  
ok: [localhost] => {"changed": false, "dest": "/tmp/test", "src": "/tmp/tmp4buGWp"}  
{'_host': localhost,  
 '_result': {'_ansible_no_log': False,  
             'changed': False,  
             'dest': u'/tmp/test',  
             'invocation': {'module_args': {u'content': u'testing',  
                                            u'dest': u'/tmp/test',  
                                            u'force': False},  
                            'module_name': u'copy'},  
             'src': u'/tmp/tmp4buGWp'},  
 '_task': TASK: copy without force}  
result=<ansible.executor.task_result.TaskResult object at 0x7fc7719e1a90>  
result._result[invocation]={'module_name': u'copy', 'module_args': {u'content': u'testing', u'dest': u'/tmp/test', u'force': False}}  
module name is copy  
  
PLAY RECAP *********************************************************************  
localhost                  : ok=3    changed=0    unreachable=0    failed=0     
```  
## Logging statements:  
### Source labels:  
Type of Sensitive Information:others -> file content  
### Sink labels:  
#### Sink 1:  
Logging call Function:  User-defined（Display.display）  
Sensitiveness-Identifiable Source:  No  
Programming Language:Python  
```Python  
  
# https://github.com/ansible/ansible/blob/b6811dfb61bee06dad08e90ef541667be7bbc950/lib/ansible/plugins/callback/default.py#L108-L147  
  
    def v2_runner_on_ok(self, result):  
  
        delegated_vars = result._result.get('_ansible_delegated_vars', None)  
  
        if isinstance(result._task, TaskInclude):  
            if self._last_task_banner != result._task._uuid:  
                self._print_task_banner(result._task)  
            return  
        elif result._result.get('changed', False):  
            if self._last_task_banner != result._task._uuid:  
                self._print_task_banner(result._task)  
  
            if delegated_vars:  
                msg = "changed: [%s -> %s]" % (result._host.get_name(), delegated_vars['ansible_host'])  
            else:  
                msg = "changed: [%s]" % result._host.get_name()  
            color = C.COLOR_CHANGED  
        else:  
            if not self.display_ok_hosts:  
                return  
  
            if self._last_task_banner != result._task._uuid:  
                self._print_task_banner(result._task)  
  
            if delegated_vars:  
                msg = "ok: [%s -> %s]" % (result._host.get_name(), delegated_vars['ansible_host'])  
            else:  
                msg = "ok: [%s]" % result._host.get_name()  
            color = C.COLOR_OK  
  
        self._handle_warnings(result._result)  
  
        if result._task.loop and 'results' in result._result:  
            self._process_items(result)  
        else:  
            self._clean_results(result._result, result._task.action)  
  
            if self._run_is_verbose(result):  
                msg += " => %s" % (self._dump_results(result._result),)  
            self._display.display(msg, color=color) # HERE IS THE SINK 1  
  
```  
